@page "/afeedback"
@inject ISessionStorageService _sessionStorage
@using Blazored.SessionStorage
@using MeetNSeat.Client.Models
@using MeetNSeat.Client.Services

@attribute [Authorize]

<main role="main" class="col-md-12 ml-sm-auto col-lg-12 px-4">
    <h2 class="pt-3 pb-2 mb-3 border-bottom">User feedback</h2>
    <div>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th scope="col">Description</th>
                    <th scope="col">FeedbackState</th>
                </tr>
            </thead>
            <tbody>
                @if (Feedback.Any())
                {
                    foreach (var feedback in Feedback)
                    {<tr class="color:red">
                        <td>@feedback.Description</td>
                        <td>

                            @if (feedback.FeedbackState == 1)
                            {
                                <h3>&#128577;</h3>
                            }
                            @if(feedback.FeedbackState == 2)
                            {
                                <h3>&#128528;</h3>
                            }
                            @if(feedback.FeedbackState == 3)
                            {
                                <h3>&#128578;</h3>
                            }
                        </td>
                    </tr>}
                }
            </tbody>
        </table>
    </div>
</main>

@code
{
    string UserId { get; set; }
    List<FeedbackModel> Feedback { get; set; } = new();

    protected override async Task OnInitializedAsync()
    {
        UserId = await _sessionStorage.GetItemAsync<string>("userId");
        Feedback = (await FeedbackService.GetAllFeedbackByUserId(UserId)).ToList();
    }
}
